'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _postcss = require('postcss');

var _postcss2 = _interopRequireDefault(_postcss);

var shortRegExps = [/(#)([0-9ABCDEF]{1,2})(\b)/gi, /(rgba?\()(\d{1,3})(,?\s?[0-9\.]*\))/gi];

exports['default'] = _postcss2['default'].plugin('postcss-color-short', function () {
  return function (style) {
    style.walkDecls(transformDecl);
  };
});

function transformDecl(decl) {
  shortRegExps.forEach(function (exp) {
    if (exp.test(decl.value)) decl.value = transformColor(exp, decl.value);
  });
}

function transformColor(exp, value) {
  return value.replace(exp, function (str, prefix, match, postfix) {
    var middle = [match, match, match];
    var joiner = prefix === '#' ? '' : ', ';
    return prefix + middle.join(joiner) + postfix;
  });
}
module.exports = exports['default'];

