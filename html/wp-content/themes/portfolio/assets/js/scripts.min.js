!function(e,t,n,o){function i(){var n=e(t).width(),o=e(t).height();e(".content--about, .content--home").css({width:n,height:o}),e(".section--works, .section--works-archive").css({height:o}),e(".content--blog #fullpage, .content--contact").css({width:n,height:o})}function a(){var n=t.location.hash.split("#")[1],o='.works__list a[href*="/'+n+'/"]';e(o).parent("li").addClass("active"),e(".works__list a").not(o).parent("li").removeClass("active")}function s(){e.fn.imagePanning=function(){var n="center",o=800,i=function(e,n,o,i,a,s){function r(){g=u()-p,c(),g>=w.time&&(w.time=g>w.time?g+h-(g-w.time):g+h-1,w.time<g+1&&(w.time=g+1)),w.time<i&&(w.id=f(r))}function c(){i>0?(w.currVal=m(w.time,v,y,i,a),b[n]=Math.round(w.currVal)+"px"):b[n]=o+"px"}function l(){h=1e3/60,w.time=g+h,f=t.requestAnimationFrame?t.requestAnimationFrame:function(e){return c(),setTimeout(e,.01)},w.id=f(r)}function d(){null!=w.id&&(t.requestAnimationFrame?t.cancelAnimationFrame(w.id):clearTimeout(w.id),w.id=null)}function m(e,t,n,o,i){var a=(e/=o)*e,s=a*e;return t+n*(.499999999999997*s*a+-2.5*a*a+5.5*s+-6.5*a+4*e)}function u(){return t.performance&&t.performance.now?t.performance.now():t.performance&&t.performance.webkitNow?t.performance.webkitNow():Date.now?Date.now():(new Date).getTime()}e._mTween||(e._mTween={top:{},left:{}});var h,f,p=u(),g=0,v=e.offsetTop,b=e.style,w=e._mTween[n];"left"===n&&(v=e.offsetLeft);var y=o-v;"none"!==s&&d(),l()};return this.each(function(){var t,a,s=e(this);s.data("imagePanning")||(s.data("imagePanning",1).wrap("<div class='img-pan-container' />").after("<div class='resize' style='position:absolute; width:auto; height:auto; top:0; right:0; bottom:0; left:0; margin:0; padding:0; overflow:hidden; visibility:hidden; z-index:-1'><iframe style='width:100%; height:0; border:0; visibility:visible; margin:0' /><iframe style='width:0; height:100%; border:0; visibility:visible; margin:0' /></div>").one("load",function(){setTimeout(function(){s.addClass("loaded").trigger("mousemove",1)},1)}).each(function(){this.complete&&e(this).load()}).parent().on("mousemove touchmove MSPointerMove pointermove",function(t,o){var i=e(this);t.preventDefault();var r=i.height(),c=i.width(),l=-1!==t.type.indexOf("touch"),d=-1!==t.type.indexOf("pointer"),m=d?t.originalEvent:l?t.originalEvent.touches[0]||t.originalEvent.changedTouches[0]:t,u=[o?"center"===n?r/2:0:m.pageY-i.offset().top,o?"center"===n?c/2:0:m.pageX-i.offset().left];a=[Math.round((s.outerHeight(!0)-r)*(u[0]/r)),Math.round((s.outerWidth(!0)-c)*(u[1]/c))]}).find(".resize iframe").each(function(){e(this.contentWindow||this).on("resize",function(){s.trigger("mousemove",1)})}),t&&clearInterval(t),t=setInterval(function(){i(s[0],"top",-a[0],o),i(s[0],"left",-a[1],o)},16.6))})},e(n).ready(function(){e("#colorbox img").imagePanning()})}function r(t){e(t).animate({width:"100%"},800)}function c(){var n=e(t).width(),o=e(t).height();e(".panel-link").colorbox({ransition:"fade",onOpen:function(){e(".content--works").fadeOut(400)},onComplete:function(){e(".cboxPhoto").unbind().click(e.colorbox.close),e("#colorbox, #cboxWrapper, #cboxContent, #cboxLoadedContent").css({width:n,height:o}),s()},onClosed:function(){e(".content--works").fadeIn(400)}}),e(".cboxPhoto").bind("click",function(){e.colorbox.close()})}function l(){setTimeout(function(){e(".map-area").each(function(t,n){function o(e,t){return e-t}var i,a=[],s=[],r=e(this).attr("coords").split(",");for(i=0;i<r.length;i++)a.push(r[i++]),s.push(r[i]);var c=s.sort(o)[0],l=a.sort(o)[0];console.log(r);2*e(".map-link").eq(t).height();e(function(){e(".map-link").eq(t).css({top:c+"px",left:l+"px"})})})},400)}!function(e){e.fn.rwdImageMaps=function(){var n=this,o=function(){n.each(function(){if("undefined"!=typeof e(this).attr("usemap")){var t=this,n=e(t);e("<img />").load(function(){var t="width",o="height",i=n.attr(t),a=n.attr(o);if(!i||!a){var s=new Image;s.src=n.attr("src"),i||(i=s.width),a||(a=s.height)}var r=n.width()/100,c=n.height()/100,l=n.attr("usemap").replace("#",""),d="coords";e('map[name="'+l+'"]').find("area").each(function(){var t=e(this);t.data(d)||t.data(d,t.attr(d));for(var n=t.data(d).split(","),o=new Array(n.length),s=0;s<o.length;++s)s%2===0?o[s]=parseInt(n[s]/i*100*r):o[s]=parseInt(n[s]/a*100*c);t.attr(d,o.toString())})}).attr("src",n.attr("src"))}})};return e(t).resize(o).trigger("resize"),this}}(jQuery),e(t).resize(function(){i()}),e(n).ready(function(){function o(n){function o(){var n=(e(t).height(),e.when(i(),e("img[usemap]").rwdImageMaps()));n.done(function(){l()}),e("#load span").animate({opacity:0},300,function(){e("#load").removeClass("loading"),e("#load span").removeAttr("style")})}e("#load").fadeIn("fast",function(){e(this).addClass("loading"),e("body").removeClass("content-on"),r("#load .load--small"),console.log("                   loaded!!")}),setTimeout(function(){t.location.hash?e("#wrapper").load("/"+n+"/ #content",function(){e("body").removeClass("home"),o(),c(),a(),e("body").addClass("content-on")}):e("#wrapper").load("/ #content",function(){e("body").addClass("home"),o()})},700)}if(console.log("Could you do the washing up without any washing up liquid?"),i(),t.location.hash){console.log("                   hashed!!");var s=t.location.hash.substr(1);o(s)}else e("body").hasClass("home")?console.log("it's home!"):t.location="/";e(t).bind("hashchange",function(){console.log("                   hashchange!!");var e=t.location.hash.substr(1);o(e)}),e(".bt-menu ul a").on("click",function(){var t=n.getElementById("bt-menu");classie.remove(t,"bt-menu-open"),e(".sketch").removeClass("active")}),e(".menu__global a").not(".link_exc").on("click",function(e){var t=n.getElementById("bt-menu");classie.remove(t,"bt-menu-open")}),e("#main").on("click","a:not(.link_exc):not(.panel-link)",function(n){n.preventDefault(),t.location.hash=e(n.currentTarget).attr("href").substr(0,e(n.currentTarget).attr("href").length).replace(/\//g,"")})}),function(e){function t(e){return new RegExp("(^|\\s+)"+e+"(\\s+|$)")}function o(e,t){var n=i(e,t)?s:a;n(e,t)}var i,a,s;"classList"in n.documentElement?(i=function(e,t){return e.classList.contains(t)},a=function(e,t){e.classList.add(t)},s=function(e,t){e.classList.remove(t)}):(i=function(e,n){return t(n).test(e.className)},a=function(e,t){i(e,t)||(e.className=e.className+" "+t)},s=function(e,n){e.className=e.className.replace(t(n)," ")});var r={hasClass:i,addClass:a,removeClass:s,toggleClass:o,has:i,add:a,remove:s,toggle:o};"function"==typeof define&&define.amd?define(r):e.classie=r}(t),function(e){function t(e){this.el=e,this.el.style.strokeDasharray=this.el.style.strokeDashoffset=this.el.getTotalLength()}t.prototype._draw=function(e){this.el.style.strokeDashoffset=this.el.getTotalLength()*(1-e)},t.prototype.setProgress=function(e,t){this._draw(e),t&&"function"==typeof t&&setTimeout(t,200)},t.prototype.setProgressFn=function(e){"function"==typeof e&&e(this)},e.PathLoader=t}(t),function(){function o(){var e=function(){s.animations&&this.removeEventListener(m,e),i()};classie.add(r,"loading"),s.animations?r.addEventListener(m,e):e()}function i(){var o=function(o){var i=0,l=setInterval(function(){if(i=Math.min(i+.1*Math.random(),1),o.setProgress(i),1===i){classie.remove(r,"loading"),classie.add(r,"loaded"),clearInterval(l);var e=function(o){if(s.animations){if(o.target!==c)return;this.removeEventListener(m,e)}classie.add(n.body,"layout-switch"),t.removeEventListener("scroll",a)};s.animations?c.addEventListener(m,e):e()}},80);e(".loaded").delay(1e3).addClass("after-load")};l.setProgressFn(o)}function a(){t.scrollTo(0,0)}var s={animations:Modernizr.cssanimations},r=n.getElementById("main"),c=r.querySelector("header.header"),l=new PathLoader(n.getElementById("ip-loader-circle")),d={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},m=d[Modernizr.prefixed("animation")];o()}(),e(function(){e("#page-title").children().andSelf().contents().each(function(){3==this.nodeType&&e(this).replaceWith(e(this).text().replace(/(\S)/g,"<span>$1</span>"))})}),e.fn.animateRotate=function(t,n,o,i){var a=e.speed(n,o,i),s=a.step;return this.each(function(n,o){a.step=function(t){return e.style(o,"transform","rotate("+t+"deg)"),s?s.apply(this,arguments):void 0},e({deg:0}).animate({deg:t},a)})},function(){function o(){var e=!1;return function(t){(/(android|ipad|playbook|silk|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||t.opera),e}function i(){var t=n.getElementById("bt-menu"),i=n.getElementById("nav-menu").querySelector("a.bt-menu-trigger-2"),a=o()?"touchstart":"click",s=function(){classie.remove(t,"bt-menu-open"),classie.add(t,"bt-menu-close")},r=function(e){s(),c.removeEventListener(a,r)},c=n.createElement("div");c.className="bt-overlay",t.appendChild(c),i.addEventListener(a,function(n){n.stopPropagation(),n.preventDefault(),classie.has(t,"bt-menu-open")?(s(),e("h2").fadeIn(),e(".sketch").removeClass("active")):(classie.remove(t,"bt-menu-close"),classie.add(t,"bt-menu-open"),e("h2").fadeOut(),c.addEventListener(a,r),e(".sketch").addClass("active"))})}i()}()}(jQuery,window,document);